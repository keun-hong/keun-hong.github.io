<!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- Dark mode: apply saved preference immediately to prevent flash -->
<script>
  (function() {
    var savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      document.documentElement.setAttribute('data-theme', 'dark');
    } else if (!savedTheme) {
      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.setAttribute('data-theme', 'dark');
      }
    }
  })();
</script>

<!-- Preload hero image for faster first paint -->
<link rel="preload" as="image" type="image/webp" href="{{ site.baseurl }}/images/index/KH_8by10.webp">

<!-- Email copy toast -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var emailLink = document.querySelector('a[href="#email-copy"]');
    if (!emailLink) return;
    var email = 'newhong@snu.ac.kr';
    var toast = document.createElement('div');
    toast.className = 'email-toast';
    toast.innerHTML = '<span class="toast-icon">âœ“</span> <span>' + email + ' copied!</span>';
    document.body.appendChild(toast);
    emailLink.addEventListener('click', function(e) {
      e.preventDefault();
      navigator.clipboard.writeText(email).then(function() {
        toast.classList.add('show');
        setTimeout(function() { toast.classList.remove('show'); }, 2000);
      });
    });
  });
</script>

<!-- Scroll Reveal -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var items = document.querySelectorAll('.list__item, .pub-card, .pub-card--co, .intro > h3, .intro > ul, .intro > br + h3, .intro > .youtube-container, .intro > .toggle-button');
    items.forEach(function(el) { el.classList.add('reveal'); });
    var observer = new IntersectionObserver(function(entries) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          entry.target.classList.add('revealed');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });
    items.forEach(function(el) { observer.observe(el); });
  });
</script>

<!-- end custom head snippets -->
